<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linq标准查询运算符 | funtim的博客</title><meta name="author" content="funtim41@gmail.com"><meta name="copyright" content="funtim41@gmail.com"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Linq标准查询运算符   标准查询运算符 返回类型 立即执行 延迟的流式处理执行 延迟非流式处理执行    Aggregate TSource X     All Boolean X     Any Boolean X     AsEnumerable IEnumerable  X    Average 单个数值 x     Cast IEnumerable  X    Concat IEnum">
<meta property="og:type" content="article">
<meta property="og:title" content="Linq标准查询运算符">
<meta property="og:url" content="https://funtim41.github.io/2024/12/16/CSharp/LINQ/">
<meta property="og:site_name" content="funtim的博客">
<meta property="og:description" content="Linq标准查询运算符   标准查询运算符 返回类型 立即执行 延迟的流式处理执行 延迟非流式处理执行    Aggregate TSource X     All Boolean X     Any Boolean X     AsEnumerable IEnumerable  X    Average 单个数值 x     Cast IEnumerable  X    Concat IEnum">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://funtim41.github.io/images/4stars.png">
<meta property="article:published_time" content="2024-12-16T03:44:29.000Z">
<meta property="article:modified_time" content="2025-01-11T12:23:21.403Z">
<meta property="article:author" content="funtim41@gmail.com">
<meta property="article:tag" content="LINQ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://funtim41.github.io/images/4stars.png"><link rel="shortcut icon" href="/images/OIP.jfif"><link rel="canonical" href="https://funtim41.github.io/2024/12/16/CSharp/LINQ/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: funtim41@gmail.com","link":"链接: ","source":"来源: funtim的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linq标准查询运算符',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/bar.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background: Color(#995a82);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/4stars.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">56</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Timeline</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/Links/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/images/topback.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/images/OIP.jfif" alt="Logo"><span class="site-name">funtim的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">Linq标准查询运算符</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Timeline</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/Links/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linq标准查询运算符</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-16T03:44:29.000Z" title="发表于 2024-12-16 11:44:29">2024-12-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-01-11T12:23:21.403Z" title="更新于 2025-01-11 20:23:21">2025-01-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/">C#</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Linq标准查询运算符"><a href="#Linq标准查询运算符" class="headerlink" title="Linq标准查询运算符"></a>Linq标准查询运算符</h1><table>
<thead>
<tr>
<th>标准查询运算符</th>
<th>返回类型</th>
<th>立即执行</th>
<th>延迟的流式处理执行</th>
<th>延迟非流式处理执行</th>
</tr>
</thead>
<tbody><tr>
<td>Aggregate</td>
<td>TSource</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>All</td>
<td>Boolean</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Any</td>
<td>Boolean</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>AsEnumerable</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Average</td>
<td>单个数值</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Cast</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Concat</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Contains</td>
<td>Boolean</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Count</td>
<td>Int32</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DefaultIfEmpty</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Distinct</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>ElementAt</td>
<td>TSource</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ElementAtOrDefault</td>
<td>TSource?</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Empty</td>
<td>IEnumerable<T></td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Except</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>First</td>
<td>TSource</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>FirstOrDefault</td>
<td>TSource?</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>GroupBy</td>
<td>IEnumerable<T></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>GroupJoin</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Intersect</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Join</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td>Last</td>
<td>TSource</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>LastOrDefault</td>
<td>TSource?</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>LongCount</td>
<td>Int64</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Max</td>
<td>单个数值 TSource 或 TResult?</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Min</td>
<td>单个数值 TSource 或 TResult?</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>OfType</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>OrderBy</td>
<td>IOrderedEnumerable<TElement></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>OrderByDescending</td>
<td>IOrderedEnumerable<TElement></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Range</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Repeat</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Reverse</td>
<td>IEnumerable<T></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>Select</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>SelectMany</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>SequenceEqual</td>
<td>Boolean</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Single</td>
<td>TSource</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>SingleOrDefault</td>
<td>TSource?</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Skip</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>SkipWhile</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Sum</td>
<td>单个数值</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Take</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>TakeWhile</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>ThenBy</td>
<td>IOrderedEnumerable<TElement></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>ThenByDescending</td>
<td>IOrderedEnumerable<TElement></td>
<td></td>
<td></td>
<td>X</td>
</tr>
<tr>
<td>ToArray</td>
<td>TSource[] 数组</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ToDictionary</td>
<td>Dictionary&lt;TKey,TValue&gt;</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ToList</td>
<td>IList<T></td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ToLookup</td>
<td>ILookup&lt;TKey,TElement&gt;</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Union</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>Where</td>
<td>IEnumerable<T></td>
<td></td>
<td>X</td>
<td></td>
</tr>
</tbody></table>
<h2 id="注：整理自C-中的-LINQ-查询简介"><a href="#注：整理自C-中的-LINQ-查询简介" class="headerlink" title="注：整理自C# 中的 LINQ 查询简介"></a>注：整理自<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/dotnet/csharp/linq/get-started/introduction-to-linq-queries">C# 中的 LINQ 查询简介</a></h2><h2 id="Aggregate"><a href="#Aggregate" class="headerlink" title="Aggregate"></a>Aggregate</h2><p>对序列应用累加器函数。 将指定的种子值用作累加器的初始值，并使用指定的函数选择结果值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Determine whether any string in the array is longer than &quot;banana&quot;.</span></span><br><span class="line"><span class="built_in">string</span> longestName =</span><br><span class="line">    fruits.Aggregate(<span class="string">&quot;banana&quot;</span>,</span><br><span class="line">                    (longest, next) =&gt;</span><br><span class="line">                        next.Length &gt; longest.Length ? next : longest,</span><br><span class="line">                    <span class="comment">// Return the final result as an upper case string.</span></span><br><span class="line">                    fruit =&gt; fruit.ToUpper());</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    <span class="string">&quot;The fruit with the longest name is &#123;0&#125;.&quot;</span>,</span><br><span class="line">    longestName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The fruit with the longest name is PASSIONFRUIT.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] ints = &#123; <span class="number">4</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">2</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Count the even numbers in the array, using a seed value of 0.</span></span><br><span class="line"><span class="built_in">int</span> numEven = ints.Aggregate(<span class="number">0</span>, (total, next) =&gt;</span><br><span class="line">                                    next % <span class="number">2</span> == <span class="number">0</span> ? total + <span class="number">1</span> : total);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The number of even integers is: &#123;0&#125;&quot;</span>, numEven);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The number of even integers is: 6</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> sentence = <span class="string">&quot;the quick brown fox jumps over the lazy dog&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Split the string into individual words.</span></span><br><span class="line"><span class="built_in">string</span>[] words = sentence.Split(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Prepend each word to the beginning of the</span></span><br><span class="line"><span class="comment">// new sentence to reverse the word order.</span></span><br><span class="line"><span class="built_in">string</span> reversed = words.Aggregate((workingSentence, next) =&gt;</span><br><span class="line">                                      next + <span class="string">&quot; &quot;</span> + workingSentence);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(reversed);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// dog lazy the over jumps fox brown quick the</span></span><br></pre></td></tr></table></figure>

<h2 id="All"><a href="#All" class="headerlink" title="All"></a>All</h2><p>确定序列中的所有元素是否都满足条件。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AllEx</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create an array of Pets.</span></span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">10</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">6</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine whether all pet names</span></span><br><span class="line">    <span class="comment">// in the array start with &#x27;B&#x27;.</span></span><br><span class="line">    <span class="built_in">bool</span> allStartWithB = pets.All(pet =&gt;</span><br><span class="line">                                      pet.Name.StartsWith(<span class="string">&quot;B&quot;</span>));</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;&#123;0&#125; pet names start with &#x27;B&#x27;.&quot;</span>,</span><br><span class="line">        allStartWithB ? <span class="string">&quot;All&quot;</span> : <span class="string">&quot;Not all&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Not all pet names start with &#x27;B&#x27;.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> LastName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> Pet[] Pets &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AllEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Person&gt; people = <span class="keyword">new</span> List&lt;Person&gt;</span><br><span class="line">        &#123; <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Haas&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">10</span> &#125;,</span><br><span class="line">                                          <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">14</span> &#125;,</span><br><span class="line">                                          <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">6</span> &#125;&#125;&#125;,</span><br><span class="line">          <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Fakhouri&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Snowball&quot;</span>, Age = <span class="number">1</span>&#125;&#125;&#125;,</span><br><span class="line">          <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Antebi&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Belle&quot;</span>, Age = <span class="number">8</span>&#125; &#125;&#125;,</span><br><span class="line">          <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Philips&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Sweetie&quot;</span>, Age = <span class="number">2</span>&#125;,</span><br><span class="line">                                          <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Rover&quot;</span>, Age = <span class="number">13</span>&#125;&#125; &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine which people have pets that are all older than 5.</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; names = <span class="keyword">from</span> person <span class="keyword">in</span> people</span><br><span class="line">                                <span class="keyword">where</span> person.Pets.All(pet =&gt; pet.Age &gt; <span class="number">5</span>)</span><br><span class="line">                                <span class="keyword">select</span> person.LastName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> names)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* This code produces the following output:</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Haas</span></span><br><span class="line"><span class="comment">     * Antebi</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h2><p>确定序列中是否包含元素或存在元素满足指定条件。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">bool</span> hasElements = numbers.Any();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The list &#123;0&#125; empty.&quot;</span>,</span><br><span class="line">    hasElements ? <span class="string">&quot;is not&quot;</span> : <span class="string">&quot;is&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The list is not empty.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> LastName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> Pet[] Pets &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AnyEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Person&gt; people = <span class="keyword">new</span> List&lt;Person&gt;</span><br><span class="line">        &#123; <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Haas&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">10</span> &#125;,</span><br><span class="line">                                          <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">14</span> &#125;,</span><br><span class="line">                                          <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">6</span> &#125;&#125;&#125;,</span><br><span class="line">          <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Fakhouri&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Snowball&quot;</span>, Age = <span class="number">1</span>&#125;&#125;&#125;,</span><br><span class="line">          <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Antebi&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; &#125;&#125;,</span><br><span class="line">          <span class="keyword">new</span> Person &#123; LastName = <span class="string">&quot;Philips&quot;</span>,</span><br><span class="line">                       Pets = <span class="keyword">new</span> Pet[] &#123; <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Sweetie&quot;</span>, Age = <span class="number">2</span>&#125;,</span><br><span class="line">                                          <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Rover&quot;</span>, Age = <span class="number">13</span>&#125;&#125; &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine which people have a non-empty Pet array.</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; names = <span class="keyword">from</span> person <span class="keyword">in</span> people</span><br><span class="line">                                <span class="keyword">where</span> person.Pets.Any()</span><br><span class="line">                                <span class="keyword">select</span> person.LastName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> names)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       Haas</span></span><br><span class="line"><span class="comment">       Fakhouri</span></span><br><span class="line"><span class="comment">       Philips</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> Vaccinated &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AnyEx3</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create an array of Pets.</span></span><br><span class="line">    Pet[] pets =</span><br><span class="line">        &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span>, Vaccinated=<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span>, Vaccinated=<span class="literal">false</span> &#125;,</span><br><span class="line">          <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span>, Vaccinated=<span class="literal">false</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine whether any pets over age 1 are also unvaccinated.</span></span><br><span class="line">    <span class="built_in">bool</span> unvaccinated =</span><br><span class="line">        pets.Any(p =&gt; p.Age &gt; <span class="number">1</span> &amp;&amp; p.Vaccinated == <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;There &#123;0&#125; unvaccinated animals over age one.&quot;</span>,</span><br><span class="line">        unvaccinated ? <span class="string">&quot;are&quot;</span> : <span class="string">&quot;are not any&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  There are unvaccinated animals over age one.</span></span><br></pre></td></tr></table></figure>

<h2 id="AsEnumerable"><a href="#AsEnumerable" class="headerlink" title="AsEnumerable"></a>AsEnumerable</h2><p>返回类型化为 IEnumerable<T> 的输入。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Custom class.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Clump</span>&lt;<span class="title">T</span>&gt; : <span class="title">List</span>&lt;<span class="title">T</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Custom implementation of Where().</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerable&lt;T&gt; <span class="title">Where</span>(<span class="params">Func&lt;T, <span class="built_in">bool</span>&gt; predicate</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;In Clump&#x27;s implementation of Where().&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Enumerable.Where(<span class="keyword">this</span>, predicate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AsEnumerableEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create a new Clump&lt;T&gt; object.</span></span><br><span class="line">    Clump&lt;<span class="built_in">string</span>&gt; fruitClump =</span><br><span class="line">        <span class="keyword">new</span> Clump&lt;<span class="built_in">string</span>&gt; &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;banana&quot;</span>,</span><br><span class="line">            <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;blueberry&quot;</span>, <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;strawberry&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// First call to Where():</span></span><br><span class="line">    <span class="comment">// Call Clump&#x27;s Where() method with a predicate.</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; query1 =</span><br><span class="line">        fruitClump.Where(fruit =&gt; fruit.Contains(<span class="string">&quot;o&quot;</span>));</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;query1 has been created.\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Second call to Where():</span></span><br><span class="line">    <span class="comment">// First call AsEnumerable() to hide Clump&#x27;s Where() method and thereby</span></span><br><span class="line">    <span class="comment">// force System.Linq.Enumerable&#x27;s Where() method to be called.</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; query2 =</span><br><span class="line">        fruitClump.AsEnumerable().Where(fruit =&gt; fruit.Contains(<span class="string">&quot;o&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Display the output.</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;query2 has been created.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// In Clump&#x27;s implementation of Where().</span></span><br><span class="line"><span class="comment">// query1 has been created.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// query2 has been created.</span></span><br></pre></td></tr></table></figure>

<h2 id="Average"><a href="#Average" class="headerlink" title="Average"></a>Average</h2><p>计算数值序列的平均值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">long</span>?[] longs = &#123; <span class="literal">null</span>, <span class="number">10007L</span>, <span class="number">37L</span>, <span class="number">399846234235L</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span>? average = longs.Average();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The average is &#123;0&#125;.&quot;</span>, average);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The average is 133282081426.333.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">int</span>&gt; grades = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">78</span>, <span class="number">92</span>, <span class="number">100</span>, <span class="number">37</span>, <span class="number">81</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> average = grades.Average();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The average grade is &#123;0&#125;.&quot;</span>, average);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The average grade is 77.6.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> average = fruits.Average(s =&gt; s.Length);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The average string length is &#123;0&#125;.&quot;</span>, average);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The average string length is 6.5.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] numbers = &#123; <span class="string">&quot;10007&quot;</span>, <span class="string">&quot;37&quot;</span>, <span class="string">&quot;299846234235&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> average = numbers.Average(num =&gt; <span class="built_in">long</span>.Parse(num));</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The average is &#123;0&#125;.&quot;</span>, average);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The average is 99948748093.</span></span><br></pre></td></tr></table></figure>

<h2 id="Cast"><a href="#Cast" class="headerlink" title="Cast"></a>Cast</h2><p>将 IEnumerable 的元素强制转换为指定的类型。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">System.Collections.ArrayList fruits = <span class="keyword">new</span> System.Collections.ArrayList();</span><br><span class="line">fruits.Add(<span class="string">&quot;mango&quot;</span>);</span><br><span class="line">fruits.Add(<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">fruits.Add(<span class="string">&quot;lemon&quot;</span>);</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">    fruits.Cast&lt;<span class="built_in">string</span>&gt;().OrderBy(fruit =&gt; fruit).Select(fruit =&gt; fruit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// The following code, without the cast, doesn&#x27;t compile.</span></span><br><span class="line"><span class="comment">//IEnumerable&lt;string&gt; query1 =</span></span><br><span class="line"><span class="comment">//    fruits.OrderBy(fruit =&gt; fruit).Select(fruit =&gt; fruit);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fruit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// apple</span></span><br><span class="line"><span class="comment">// lemon</span></span><br><span class="line"><span class="comment">// mango</span></span><br></pre></td></tr></table></figure>

<h2 id="Concat"><a href="#Concat" class="headerlink" title="Concat"></a>Concat</h2><p>连接两个序列。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> Pet[] <span class="title">GetCats</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] cats = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line">    <span class="keyword">return</span> cats;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> Pet[] <span class="title">GetDogs</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] dogs = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Bounder&quot;</span>, Age=<span class="number">3</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Snoopy&quot;</span>, Age=<span class="number">14</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Fido&quot;</span>, Age=<span class="number">9</span> &#125; &#125;;</span><br><span class="line">    <span class="keyword">return</span> dogs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ConcatEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] cats = GetCats();</span><br><span class="line">    Pet[] dogs = GetDogs();</span><br><span class="line"></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">        cats.Select(cat =&gt; cat.Name).Concat(dogs.Select(dog =&gt; dog.Name));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Barley</span></span><br><span class="line"><span class="comment">// Boots</span></span><br><span class="line"><span class="comment">// Whiskers</span></span><br><span class="line"><span class="comment">// Bounder</span></span><br><span class="line"><span class="comment">// Snoopy</span></span><br><span class="line"><span class="comment">// Fido</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Pet[] cats = GetCats();</span><br><span class="line">Pet[] dogs = GetDogs();</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">    <span class="keyword">new</span>[] &#123; cats.Select(cat =&gt; cat.Name), dogs.Select(dog =&gt; dog.Name) &#125;</span><br><span class="line">    .SelectMany(name =&gt; name);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Barley</span></span><br><span class="line"><span class="comment">// Boots</span></span><br><span class="line"><span class="comment">// Whiskers</span></span><br><span class="line"><span class="comment">// Bounder</span></span><br><span class="line"><span class="comment">// Snoopy</span></span><br><span class="line"><span class="comment">// Fido</span></span><br></pre></td></tr></table></figure>

<h2 id="Contains"><a href="#Contains" class="headerlink" title="Contains"></a>Contains</h2><p>确定序列是否包含指定的元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> fruit = <span class="string">&quot;mango&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> hasMango = fruits.Contains(fruit);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    <span class="string">&quot;The array &#123;0&#125; contain &#x27;&#123;1&#125;&#x27;.&quot;</span>,</span><br><span class="line">    hasMango ? <span class="string">&quot;does&quot;</span> : <span class="string">&quot;does not&quot;</span>,</span><br><span class="line">    fruit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The array does contain &#x27;mango&#x27;.</span></span><br></pre></td></tr></table></figure>

<h2 id="Count"><a href="#Count" class="headerlink" title="Count"></a>Count</h2><p>返回序列中的元素数量。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> numberOfFruits = fruits.Count();</span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;There are &#123;0&#125; fruits in the collection.&quot;</span>,</span><br><span class="line">        numberOfFruits);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (OverflowException)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;The count is too large to store as an Int32.&quot;</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Try using the LongCount() method instead.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// There are 6 fruits in the collection.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> Vaccinated &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CountEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Vaccinated=<span class="literal">true</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Vaccinated=<span class="literal">false</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Vaccinated=<span class="literal">false</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> numberUnvaccinated = pets.Count(p =&gt; p.Vaccinated == <span class="literal">false</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;There are &#123;0&#125; unvaccinated animals.&quot;</span>, numberUnvaccinated);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (OverflowException)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;The count is too large to store as an Int32.&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Try using the LongCount() method instead.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// There are 2 unvaccinated animals.</span></span><br></pre></td></tr></table></figure>

<h2 id="DefaultIfEmpty"><a href="#DefaultIfEmpty" class="headerlink" title="DefaultIfEmpty"></a>DefaultIfEmpty</h2><p>返回 IEnumerable<T>的元素;如果序列为空，则返回默认值单一实例集合。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DefaultIfEmptyEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Pet&gt; pets =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Pet&gt;&#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (Pet pet <span class="keyword">in</span> pets.DefaultIfEmpty())</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(pet.Name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Barley</span></span><br><span class="line"><span class="comment"> Boots</span></span><br><span class="line"><span class="comment"> Whiskers</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> numbers.DefaultIfEmpty())</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(number);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DefaultIfEmptyEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet defaultPet = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Default Pet&quot;</span>, Age = <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">    List&lt;Pet&gt; pets1 =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Pet&gt;&#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (Pet pet <span class="keyword">in</span> pets1.DefaultIfEmpty(defaultPet))</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Name: &#123;0&#125;&quot;</span>, pet.Name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    List&lt;Pet&gt; pets2 = <span class="keyword">new</span> List&lt;Pet&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (Pet pet <span class="keyword">in</span> pets2.DefaultIfEmpty(defaultPet))</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;\nName: &#123;0&#125;&quot;</span>, pet.Name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Name: Barley</span></span><br><span class="line"><span class="comment"> Name: Boots</span></span><br><span class="line"><span class="comment"> Name: Whiskers</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Name: Default Pet</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct"></a>Distinct</h2><p>返回序列中的非重复元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">int</span>&gt; ages = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">21</span>, <span class="number">46</span>, <span class="number">46</span>, <span class="number">55</span>, <span class="number">17</span>, <span class="number">21</span>, <span class="number">55</span>, <span class="number">55</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; distinctAges = ages.Distinct();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;Distinct ages:&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> age <span class="keyword">in</span> distinctAges)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Distinct ages:</span></span><br><span class="line"><span class="comment"> 21</span></span><br><span class="line"><span class="comment"> 46</span></span><br><span class="line"><span class="comment"> 55</span></span><br><span class="line"><span class="comment"> 17</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyProduct</span> : <span class="title">IEquatable</span>&lt;<span class="title">MyProduct</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">MyProduct other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Check whether the compared object is null.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(other, <span class="literal">null</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the compared object references the same data.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(<span class="keyword">this</span>, other)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the products&#x27; properties are equal.</span></span><br><span class="line">        <span class="keyword">return</span> Code.Equals(other.Code) &amp;&amp; Name.Equals(other.Name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If Equals() returns true for a pair of objects</span></span><br><span class="line">    <span class="comment">// then GetHashCode() must return the same value for these objects.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Name field if it is not null.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductName = Name == <span class="literal">null</span> ? <span class="number">0</span> : Name.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Code field.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductCode = Code.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Calculate the hash code for the product.</span></span><br><span class="line">        <span class="keyword">return</span> hashProductName ^ hashProductCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyProduct[] products = &#123; <span class="keyword">new</span> MyProduct &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> MyProduct &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> MyProduct &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> MyProduct &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Exclude duplicates.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;MyProduct&gt; noduplicates =</span><br><span class="line">    products.Distinct();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> noduplicates)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment">    apple 9</span></span><br><span class="line"><span class="comment">    orange 4</span></span><br><span class="line"><span class="comment">    lemon 12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ElementAt"><a href="#ElementAt" class="headerlink" title="ElementAt"></a>ElementAt</h2><p>返回序列中指定索引处的元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names =</span><br><span class="line">    &#123; <span class="string">&quot;Hartono, Tommy&quot;</span>, <span class="string">&quot;Adams, Terry&quot;</span>, <span class="string">&quot;Andersen, Henriette Thaulow&quot;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;Hedlund, Magnus&quot;</span>, <span class="string">&quot;Ito, Shu&quot;</span> &#125;;</span><br><span class="line">Random random = <span class="keyword">new</span> Random(DateTime.Now.Millisecond);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> name = names.ElementAt(random.Next(<span class="number">0</span>, names.Length));</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The name chosen at random is &#x27;&#123;0&#125;&#x27;.&quot;</span>, name);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces output similar to the following:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The name chosen at random is &#x27;Ito, Shu&#x27;.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ElementAtOrDefault"><a href="#ElementAtOrDefault" class="headerlink" title="ElementAtOrDefault"></a>ElementAtOrDefault</h2><p>返回序列中指定索引处的元素；如果索引超出范围，则返回默认值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names =</span><br><span class="line">    &#123; <span class="string">&quot;Hartono, Tommy&quot;</span>, <span class="string">&quot;Adams, Terry&quot;</span>, <span class="string">&quot;Andersen, Henriette Thaulow&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Hedlund, Magnus&quot;</span>, <span class="string">&quot;Ito, Shu&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> index = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> name = names.ElementAtOrDefault(index);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    <span class="string">&quot;The name chosen at index &#123;0&#125; is &#x27;&#123;1&#125;&#x27;.&quot;</span>,</span><br><span class="line">    index,</span><br><span class="line">    String.IsNullOrEmpty(name) ? <span class="string">&quot;&lt;no name at this index&gt;&quot;</span> : name);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The name chosen at index 20 is &#x27;&lt;no name at this index&gt;&#x27;.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Empty"><a href="#Empty" class="headerlink" title="Empty"></a>Empty</h2><p>返回具有指定类型参数的空 IEnumerable<T>。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names1 = &#123; <span class="string">&quot;Hartono, Tommy&quot;</span> &#125;;</span><br><span class="line"><span class="built_in">string</span>[] names2 = &#123; <span class="string">&quot;Adams, Terry&quot;</span>, <span class="string">&quot;Andersen, Henriette Thaulow&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Hedlund, Magnus&quot;</span>, <span class="string">&quot;Ito, Shu&quot;</span> &#125;;</span><br><span class="line"><span class="built_in">string</span>[] names3 = &#123; <span class="string">&quot;Solanki, Ajay&quot;</span>, <span class="string">&quot;Hoeing, Helge&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Andersen, Henriette Thaulow&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Potra, Cristina&quot;</span>, <span class="string">&quot;Iallo, Lucio&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">List&lt;<span class="built_in">string</span>[]&gt; namesList =</span><br><span class="line">    <span class="keyword">new</span> List&lt;<span class="built_in">string</span>[]&gt; &#123; names1, names2, names3 &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Only include arrays that have four or more elements</span></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; allNames =</span><br><span class="line">    namesList.Aggregate(Enumerable.Empty&lt;<span class="built_in">string</span>&gt;(),</span><br><span class="line">    (current, next) =&gt; next.Length &gt; <span class="number">3</span> ? current.Union(next) : current);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> allNames)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Adams, Terry</span></span><br><span class="line"><span class="comment"> Andersen, Henriette Thaulow</span></span><br><span class="line"><span class="comment"> Hedlund, Magnus</span></span><br><span class="line"><span class="comment"> Ito, Shu</span></span><br><span class="line"><span class="comment"> Solanki, Ajay</span></span><br><span class="line"><span class="comment"> Hoeing, Helge</span></span><br><span class="line"><span class="comment"> Potra, Cristina</span></span><br><span class="line"><span class="comment"> Iallo, Lucio</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Except"><a href="#Except" class="headerlink" title="Except"></a>Except</h2><p>生成两个序列的差集。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span>[] numbers1 = &#123; <span class="number">2.0</span>, <span class="number">2.0</span>, <span class="number">2.1</span>, <span class="number">2.2</span>, <span class="number">2.3</span>, <span class="number">2.3</span>, <span class="number">2.4</span>, <span class="number">2.5</span> &#125;;</span><br><span class="line"><span class="built_in">double</span>[] numbers2 = &#123; <span class="number">2.2</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">double</span>&gt; onlyInFirstSet = numbers1.Except(numbers2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">double</span> number <span class="keyword">in</span> onlyInFirstSet)</span><br><span class="line">    Console.WriteLine(number);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 2</span></span><br><span class="line"><span class="comment"> 2.1</span></span><br><span class="line"><span class="comment"> 2.3</span></span><br><span class="line"><span class="comment"> 2.4</span></span><br><span class="line"><span class="comment"> 2.5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProductA</span> : <span class="title">IEquatable</span>&lt;<span class="title">ProductA</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">ProductA other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (other <span class="keyword">is</span> <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.Name == other.Name &amp;&amp; <span class="keyword">this</span>.Code == other.Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params"><span class="built_in">object</span> obj</span>)</span> =&gt; Equals(obj <span class="keyword">as</span> ProductA);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>()</span> =&gt; (Name, Code).GetHashCode();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ProductA[] fruits1 = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125;,</span><br><span class="line">                        <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">ProductA[] fruits2 = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get all the elements from the first array</span></span><br><span class="line"><span class="comment">// except for the elements from the second array.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;ProductA&gt; except =</span><br><span class="line">    fruits1.Except(fruits2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> except)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  orange 4</span></span><br><span class="line"><span class="comment">  lemon 12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Custom comparer for the Product class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">ProductComparer</span> : <span class="title">IEqualityComparer</span>&lt;<span class="title">Product</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Products are equal if their names and product numbers are equal.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">Product x, Product y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the compared objects reference the same data.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether any of the compared objects is null.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, <span class="literal">null</span>) || Object.ReferenceEquals(y, <span class="literal">null</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the products&#x27; properties are equal.</span></span><br><span class="line">        <span class="keyword">return</span> x.Code == y.Code &amp;&amp; x.Name == y.Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If Equals() returns true for a pair of objects</span></span><br><span class="line">    <span class="comment">// then GetHashCode() must return the same value for these objects.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>(<span class="params">Product product</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Check whether the object is null</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(product, <span class="literal">null</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Name field if it is not null.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductName = product.Name == <span class="literal">null</span> ? <span class="number">0</span> : product.Name.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Code field.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductCode = product.Code.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Calculate the hash code for the product.</span></span><br><span class="line">        <span class="keyword">return</span> hashProductName ^ hashProductCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Product[] fruits1 = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125;,</span><br><span class="line">                        <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">Product[] fruits2 = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get all the elements from the first array</span></span><br><span class="line"><span class="comment">// except for the elements from the second array.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;Product&gt; except =</span><br><span class="line">    fruits1.Except(fruits2, <span class="keyword">new</span> ProductComparer());</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> except)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  orange 4</span></span><br><span class="line"><span class="comment">  lemon 12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="First"><a href="#First" class="headerlink" title="First"></a>First</h2><p>返回序列中的第一个元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">9</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">92</span>, <span class="number">87</span>, <span class="number">435</span>, <span class="number">3</span>, <span class="number">54</span>,</span><br><span class="line">                    <span class="number">83</span>, <span class="number">23</span>, <span class="number">87</span>, <span class="number">435</span>, <span class="number">67</span>, <span class="number">12</span>, <span class="number">19</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> first = numbers.First();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(first);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">9</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">92</span>, <span class="number">87</span>, <span class="number">435</span>, <span class="number">3</span>, <span class="number">54</span>,</span><br><span class="line">                    <span class="number">83</span>, <span class="number">23</span>, <span class="number">87</span>, <span class="number">435</span>, <span class="number">67</span>, <span class="number">12</span>, <span class="number">19</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> first = numbers.First(number =&gt; number &gt; <span class="number">80</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(first);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 92</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="FirstOrDefault"><a href="#FirstOrDefault" class="headerlink" title="FirstOrDefault"></a>FirstOrDefault</h2><p>返回序列中的第一个元素；如果未找到该元素，则返回默认值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] names = &#123; <span class="string">&quot;Hartono, Tommy&quot;</span>, <span class="string">&quot;Adams, Terry&quot;</span>,</span><br><span class="line">                     <span class="string">&quot;Andersen, Henriette Thaulow&quot;</span>,</span><br><span class="line">                     <span class="string">&quot;Hedlund, Magnus&quot;</span>, <span class="string">&quot;Ito, Shu&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> firstLongName = names.FirstOrDefault(name =&gt; name.Length &gt; <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The first long name is &#x27;&#123;0&#125;&#x27;.&quot;</span>, firstLongName);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> firstVeryLongName = names.FirstOrDefault(name =&gt; name.Length &gt; <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    <span class="string">&quot;There is &#123;0&#125; name longer than 30 characters.&quot;</span>,</span><br><span class="line">    <span class="built_in">string</span>.IsNullOrEmpty(firstVeryLongName) ? <span class="string">&quot;not a&quot;</span> : <span class="string">&quot;a&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The first long name is &#x27;Andersen, Henriette Thaulow&#x27;.</span></span><br><span class="line"><span class="comment"> There is not a name longer than 30 characters.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; &#125;;</span><br><span class="line"><span class="built_in">int</span> first = numbers.FirstOrDefault();</span><br><span class="line">Console.WriteLine(first);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">int</span>&gt; months = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting the default value to 1 after the query.</span></span><br><span class="line"><span class="built_in">int</span> firstMonth1 = months.FirstOrDefault();</span><br><span class="line"><span class="keyword">if</span> (firstMonth1 == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    firstMonth1 = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;The value of the firstMonth1 variable is &#123;0&#125;&quot;</span>, firstMonth1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting the default value to 1 by using DefaultIfEmpty() in the query.</span></span><br><span class="line"><span class="built_in">int</span> firstMonth2 = months.DefaultIfEmpty(<span class="number">1</span>).First();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;The value of the firstMonth2 variable is &#123;0&#125;&quot;</span>, firstMonth2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The value of the firstMonth1 variable is 1</span></span><br><span class="line"><span class="comment"> The value of the firstMonth2 variable is 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="GroupBy"><a href="#GroupBy" class="headerlink" title="GroupBy"></a>GroupBy</h2><p>对序列中的元素进行分组。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GroupByEx4</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create a list of pets.</span></span><br><span class="line">    List&lt;Pet&gt; petsList =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Pet&gt;&#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8.3</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4.9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1.5</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Daisy&quot;</span>, Age=<span class="number">4.3</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Group Pet.Age values by the Math.Floor of the age.</span></span><br><span class="line">    <span class="comment">// Then project an anonymous type from each group</span></span><br><span class="line">    <span class="comment">// that consists of the key, the count of the group&#x27;s</span></span><br><span class="line">    <span class="comment">// elements, and the minimum and maximum age in the group.</span></span><br><span class="line">    <span class="keyword">var</span> query = petsList.GroupBy(</span><br><span class="line">        pet =&gt; Math.Floor(pet.Age),</span><br><span class="line">        pet =&gt; pet.Age,</span><br><span class="line">        (baseAge, ages) =&gt; <span class="keyword">new</span></span><br><span class="line">        &#123;</span><br><span class="line">            Key = baseAge,</span><br><span class="line">            Count = ages.Count(),</span><br><span class="line">            Min = ages.Min(),</span><br><span class="line">            Max = ages.Max()</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterate over each anonymous type.</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> result <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;\nAge group: &quot;</span> + result.Key);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Number of pets in this age group: &quot;</span> + result.Count);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Minimum age: &quot;</span> + result.Min);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Maximum age: &quot;</span> + result.Max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*  This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Age group: 8</span></span><br><span class="line"><span class="comment">        Number of pets in this age group: 1</span></span><br><span class="line"><span class="comment">        Minimum age: 8.3</span></span><br><span class="line"><span class="comment">        Maximum age: 8.3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Age group: 4</span></span><br><span class="line"><span class="comment">        Number of pets in this age group: 2</span></span><br><span class="line"><span class="comment">        Minimum age: 4.3</span></span><br><span class="line"><span class="comment">        Maximum age: 4.9</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Age group: 1</span></span><br><span class="line"><span class="comment">        Number of pets in this age group: 1</span></span><br><span class="line"><span class="comment">        Minimum age: 1.5</span></span><br><span class="line"><span class="comment">        Maximum age: 1.5</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Uses method-based query syntax.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GroupByEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create a list of pets.</span></span><br><span class="line">    List&lt;Pet&gt; pets =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Pet&gt;&#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Daisy&quot;</span>, Age=<span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Group the pets using Age as the key value</span></span><br><span class="line">    <span class="comment">// and selecting only the pet&#x27;s Name for each value.</span></span><br><span class="line">    IEnumerable&lt;IGrouping&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt;&gt; query =</span><br><span class="line">        pets.GroupBy(pet =&gt; pet.Age, pet =&gt; pet.Name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterate over each IGrouping in the collection.</span></span><br><span class="line">    <span class="keyword">foreach</span> (IGrouping&lt;<span class="built_in">int</span>, <span class="built_in">string</span>&gt; petGroup <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Print the key value of the IGrouping.</span></span><br><span class="line">        Console.WriteLine(petGroup.Key);</span><br><span class="line">        <span class="comment">// Iterate over each value in the</span></span><br><span class="line">        <span class="comment">// IGrouping and print the value.</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">string</span> name <span class="keyword">in</span> petGroup)</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;  &#123;0&#125;&quot;</span>, name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 8</span></span><br><span class="line"><span class="comment">   Barley</span></span><br><span class="line"><span class="comment"> 4</span></span><br><span class="line"><span class="comment">   Boots</span></span><br><span class="line"><span class="comment">   Daisy</span></span><br><span class="line"><span class="comment"> 1</span></span><br><span class="line"><span class="comment">   Whiskers</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GroupByEx3</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create a list of pets.</span></span><br><span class="line">    List&lt;Pet&gt; petsList =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Pet&gt;&#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8.3</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4.9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1.5</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Daisy&quot;</span>, Age=<span class="number">4.3</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Group Pet objects by the Math.Floor of their age.</span></span><br><span class="line">    <span class="comment">// Then project an anonymous type from each group</span></span><br><span class="line">    <span class="comment">// that consists of the key, the count of the group&#x27;s</span></span><br><span class="line">    <span class="comment">// elements, and the minimum and maximum age in the group.</span></span><br><span class="line">    <span class="keyword">var</span> query = petsList.GroupBy(</span><br><span class="line">        pet =&gt; Math.Floor(pet.Age),</span><br><span class="line">        (age, pets) =&gt; <span class="keyword">new</span></span><br><span class="line">        &#123;</span><br><span class="line">            Key = age,</span><br><span class="line">            Count = pets.Count(),</span><br><span class="line">            Min = pets.Min(pet =&gt; pet.Age),</span><br><span class="line">            Max = pets.Max(pet =&gt; pet.Age)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterate over each anonymous type.</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> result <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;\nAge group: &quot;</span> + result.Key);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Number of pets in this age group: &quot;</span> + result.Count);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Minimum age: &quot;</span> + result.Min);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Maximum age: &quot;</span> + result.Max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*  This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Age group: 8</span></span><br><span class="line"><span class="comment">        Number of pets in this age group: 1</span></span><br><span class="line"><span class="comment">        Minimum age: 8.3</span></span><br><span class="line"><span class="comment">        Maximum age: 8.3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Age group: 4</span></span><br><span class="line"><span class="comment">        Number of pets in this age group: 2</span></span><br><span class="line"><span class="comment">        Minimum age: 4.3</span></span><br><span class="line"><span class="comment">        Maximum age: 4.9</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        Age group: 1</span></span><br><span class="line"><span class="comment">        Number of pets in this age group: 1</span></span><br><span class="line"><span class="comment">        Minimum age: 1.5</span></span><br><span class="line"><span class="comment">        Maximum age: 1.5</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GroupJoin"><a href="#GroupJoin" class="headerlink" title="GroupJoin"></a>GroupJoin</h2><p>基于键值等同性将两个序列的元素进行关联，并对结果进行分组。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> Person Owner &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GroupJoinEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Person magnus = <span class="keyword">new</span> Person &#123; Name = <span class="string">&quot;Hedlund, Magnus&quot;</span> &#125;;</span><br><span class="line">    Person terry = <span class="keyword">new</span> Person &#123; Name = <span class="string">&quot;Adams, Terry&quot;</span> &#125;;</span><br><span class="line">    Person charlotte = <span class="keyword">new</span> Person &#123; Name = <span class="string">&quot;Weiss, Charlotte&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    Pet barley = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Barley&quot;</span>, Owner = terry &#125;;</span><br><span class="line">    Pet boots = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Boots&quot;</span>, Owner = terry &#125;;</span><br><span class="line">    Pet whiskers = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Whiskers&quot;</span>, Owner = charlotte &#125;;</span><br><span class="line">    Pet daisy = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Daisy&quot;</span>, Owner = magnus &#125;;</span><br><span class="line"></span><br><span class="line">    List&lt;Person&gt; people = <span class="keyword">new</span> List&lt;Person&gt; &#123; magnus, terry, charlotte &#125;;</span><br><span class="line">    List&lt;Pet&gt; pets = <span class="keyword">new</span> List&lt;Pet&gt; &#123; barley, boots, whiskers, daisy &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a list where each element is an anonymous</span></span><br><span class="line">    <span class="comment">// type that contains a person&#x27;s name and</span></span><br><span class="line">    <span class="comment">// a collection of names of the pets they own.</span></span><br><span class="line">    <span class="keyword">var</span> query =</span><br><span class="line">        people.GroupJoin(pets,</span><br><span class="line">                         person =&gt; person,</span><br><span class="line">                         pet =&gt; pet.Owner,</span><br><span class="line">                         (person, petCollection) =&gt;</span><br><span class="line">                             <span class="keyword">new</span></span><br><span class="line">                             &#123;</span><br><span class="line">                                 OwnerName = person.Name,</span><br><span class="line">                                 Pets = petCollection.Select(pet =&gt; pet.Name)</span><br><span class="line">                             &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> obj <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Output the owner&#x27;s name.</span></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;&#123;0&#125;:&quot;</span>, obj.OwnerName);</span><br><span class="line">        <span class="comment">// Output each of the owner&#x27;s pet&#x27;s names.</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">string</span> pet <span class="keyword">in</span> obj.Pets)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;  &#123;0&#125;&quot;</span>, pet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Hedlund, Magnus:</span></span><br><span class="line"><span class="comment">   Daisy</span></span><br><span class="line"><span class="comment"> Adams, Terry:</span></span><br><span class="line"><span class="comment">   Barley</span></span><br><span class="line"><span class="comment">   Boots</span></span><br><span class="line"><span class="comment"> Weiss, Charlotte:</span></span><br><span class="line"><span class="comment">   Whiskers</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Intersect"><a href="#Intersect" class="headerlink" title="Intersect"></a>Intersect</h2><p>生成两个序列的交集。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] id1 = &#123; <span class="number">44</span>, <span class="number">26</span>, <span class="number">92</span>, <span class="number">30</span>, <span class="number">71</span>, <span class="number">38</span> &#125;;</span><br><span class="line"><span class="built_in">int</span>[] id2 = &#123; <span class="number">39</span>, <span class="number">59</span>, <span class="number">83</span>, <span class="number">47</span>, <span class="number">26</span>, <span class="number">4</span>, <span class="number">30</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; both = id1.Intersect(id2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> id <span class="keyword">in</span> both)</span><br><span class="line">    Console.WriteLine(id);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 26</span></span><br><span class="line"><span class="comment"> 30</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProductA</span> : <span class="title">IEquatable</span>&lt;<span class="title">ProductA</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">ProductA other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (other <span class="keyword">is</span> <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.Name == other.Name &amp;&amp; <span class="keyword">this</span>.Code == other.Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params"><span class="built_in">object</span> obj</span>)</span> =&gt; Equals(obj <span class="keyword">as</span> ProductA);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>()</span> =&gt; (Name, Code).GetHashCode();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ProductA[] store1 = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">ProductA[] store2 = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the products from the first array</span></span><br><span class="line"><span class="comment">// that have duplicates in the second array.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;ProductA&gt; duplicates =</span><br><span class="line">    store1.Intersect(store2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> duplicates)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment">    apple 9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Custom comparer for the Product class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">ProductComparer</span> : <span class="title">IEqualityComparer</span>&lt;<span class="title">Product</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Products are equal if their names and product numbers are equal.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">Product x, Product y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the compared objects reference the same data.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether any of the compared objects is null.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, <span class="literal">null</span>) || Object.ReferenceEquals(y, <span class="literal">null</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the products&#x27; properties are equal.</span></span><br><span class="line">        <span class="keyword">return</span> x.Code == y.Code &amp;&amp; x.Name == y.Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If Equals() returns true for a pair of objects</span></span><br><span class="line">    <span class="comment">// then GetHashCode() must return the same value for these objects.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>(<span class="params">Product product</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Check whether the object is null</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(product, <span class="literal">null</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Name field if it is not null.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductName = product.Name == <span class="literal">null</span> ? <span class="number">0</span> : product.Name.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Code field.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductCode = product.Code.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Calculate the hash code for the product.</span></span><br><span class="line">        <span class="keyword">return</span> hashProductName ^ hashProductCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Product[] store1 = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">Product[] store2 = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the products from the first array</span></span><br><span class="line"><span class="comment">// that have duplicates in the second array.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;Product&gt; duplicates =</span><br><span class="line">    store1.Intersect(store2, <span class="keyword">new</span> ProductComparer());</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> duplicates)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment">    apple 9</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h2><p>基于匹配键对两个序列的元素进行关联。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> Person Owner &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">JoinEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Person magnus = <span class="keyword">new</span> Person &#123; Name = <span class="string">&quot;Hedlund, Magnus&quot;</span> &#125;;</span><br><span class="line">    Person terry = <span class="keyword">new</span> Person &#123; Name = <span class="string">&quot;Adams, Terry&quot;</span> &#125;;</span><br><span class="line">    Person charlotte = <span class="keyword">new</span> Person &#123; Name = <span class="string">&quot;Weiss, Charlotte&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    Pet barley = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Barley&quot;</span>, Owner = terry &#125;;</span><br><span class="line">    Pet boots = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Boots&quot;</span>, Owner = terry &#125;;</span><br><span class="line">    Pet whiskers = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Whiskers&quot;</span>, Owner = charlotte &#125;;</span><br><span class="line">    Pet daisy = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Daisy&quot;</span>, Owner = magnus &#125;;</span><br><span class="line"></span><br><span class="line">    List&lt;Person&gt; people = <span class="keyword">new</span> List&lt;Person&gt; &#123; magnus, terry, charlotte &#125;;</span><br><span class="line">    List&lt;Pet&gt; pets = <span class="keyword">new</span> List&lt;Pet&gt; &#123; barley, boots, whiskers, daisy &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a list of Person-Pet pairs where</span></span><br><span class="line">    <span class="comment">// each element is an anonymous type that contains a</span></span><br><span class="line">    <span class="comment">// Pet&#x27;s name and the name of the Person that owns the Pet.</span></span><br><span class="line">    <span class="keyword">var</span> query =</span><br><span class="line">        people.Join(pets,</span><br><span class="line">                    person =&gt; person,</span><br><span class="line">                    pet =&gt; pet.Owner,</span><br><span class="line">                    (person, pet) =&gt;</span><br><span class="line">                        <span class="keyword">new</span> &#123; OwnerName = person.Name, Pet = pet.Name &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> obj <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(</span><br><span class="line">            <span class="string">&quot;&#123;0&#125; - &#123;1&#125;&quot;</span>,</span><br><span class="line">            obj.OwnerName,</span><br><span class="line">            obj.Pet);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Hedlund, Magnus - Daisy</span></span><br><span class="line"><span class="comment"> Adams, Terry - Barley</span></span><br><span class="line"><span class="comment"> Adams, Terry - Boots</span></span><br><span class="line"><span class="comment"> Weiss, Charlotte - Whiskers</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Last"><a href="#Last" class="headerlink" title="Last"></a>Last</h2><p>返回序列的最后一个元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">9</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">92</span>, <span class="number">87</span>, <span class="number">435</span>, <span class="number">3</span>, <span class="number">54</span>,</span><br><span class="line">                    <span class="number">83</span>, <span class="number">23</span>, <span class="number">87</span>, <span class="number">67</span>, <span class="number">12</span>, <span class="number">19</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> last = numbers.Last();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(last);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 19</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">9</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">92</span>, <span class="number">87</span>, <span class="number">435</span>, <span class="number">3</span>, <span class="number">54</span>,</span><br><span class="line">                    <span class="number">83</span>, <span class="number">23</span>, <span class="number">87</span>, <span class="number">67</span>, <span class="number">12</span>, <span class="number">19</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> last = numbers.Last(num =&gt; num &gt; <span class="number">80</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(last);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 87</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="LastOrDefault"><a href="#LastOrDefault" class="headerlink" title="LastOrDefault"></a>LastOrDefault</h2><p>返回序列中的最后一个元素；如果未找到该元素，则返回默认值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; &#125;;</span><br><span class="line"><span class="built_in">string</span> last = fruits.LastOrDefault();</span><br><span class="line">Console.WriteLine(</span><br><span class="line">    String.IsNullOrEmpty(last) ? <span class="string">&quot;&lt;string is null or empty&gt;&quot;</span> : last);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> &lt;string is null or empty&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">int</span>&gt; daysOfMonth = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting the default value to 1 after the query.</span></span><br><span class="line"><span class="built_in">int</span> lastDay1 = daysOfMonth.LastOrDefault();</span><br><span class="line"><span class="keyword">if</span> (lastDay1 == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    lastDay1 = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;The value of the lastDay1 variable is &#123;0&#125;&quot;</span>, lastDay1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting the default value to 1 by using DefaultIfEmpty() in the query.</span></span><br><span class="line"><span class="built_in">int</span> lastDay2 = daysOfMonth.DefaultIfEmpty(<span class="number">1</span>).Last();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;The value of the lastDay2 variable is &#123;0&#125;&quot;</span>, lastDay2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The value of the lastDay1 variable is 1</span></span><br><span class="line"><span class="comment"> The value of the lastDay2 variable is 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span>[] numbers = &#123; <span class="number">49.6</span>, <span class="number">52.3</span>, <span class="number">51.0</span>, <span class="number">49.4</span>, <span class="number">50.2</span>, <span class="number">48.3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> last50 = numbers.LastOrDefault(n =&gt; Math.Round(n) == <span class="number">50.0</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The last number that rounds to 50 is &#123;0&#125;.&quot;</span>, last50);</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> last40 = numbers.LastOrDefault(n =&gt; Math.Round(n) == <span class="number">40.0</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    <span class="string">&quot;The last number that rounds to 40 is &#123;0&#125;.&quot;</span>,</span><br><span class="line">    last40 == <span class="number">0.0</span> ? <span class="string">&quot;&lt;DOES NOT EXIST&gt;&quot;</span> : last40.ToString());</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The last number that rounds to 50 is 50.2.</span></span><br><span class="line"><span class="comment"> The last number that rounds to 40 is &lt;DOES NOT EXIST&gt;.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="LongCount"><a href="#LongCount" class="headerlink" title="LongCount"></a>LongCount</h2><p>返回表示序列中的元素数量的 Int64。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">long</span> count = fruits.LongCount();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;There are &#123;0&#125; fruits in the collection.&quot;</span>, count);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> There are 6 fruits in the collection.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LongCountEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">int</span> Age = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">long</span> count = pets.LongCount(pet =&gt; pet.Age &gt; Age);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;There are &#123;0&#125; animals over age &#123;1&#125;.&quot;</span>, count, Age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> There are 2 animals over age 3.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Max"><a href="#Max" class="headerlink" title="Max"></a>Max</h2><p>返回值序列中的最大值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span>?[] doubles = &#123; <span class="literal">null</span>, <span class="number">1.5E+104</span>, <span class="number">9E+103</span>, <span class="number">-2E+103</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span>? max = doubles.Max();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The largest number is &#123;0&#125;.&quot;</span>, max);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The largest number is 1.5E+104.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">long</span>&gt; longs = <span class="keyword">new</span> List&lt;<span class="built_in">long</span>&gt; &#123; <span class="number">4294967296L</span>, <span class="number">466855135L</span>, <span class="number">81125L</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">long</span> max = longs.Max();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The largest number is &#123;0&#125;.&quot;</span>, max);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The largest number is 4294967296.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MaxEx4</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> max = pets.Max(pet =&gt; pet.Age + pet.Name.Length);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;The maximum pet age plus name length is &#123;0&#125;.&quot;</span>,</span><br><span class="line">        max);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The maximum pet age plus name length is 14.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> This class implements IComparable to be able to</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> compare one Pet to another Pet.</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Pet</span> : <span class="title">IComparable</span>&lt;<span class="title">Pet</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> Compares this Pet to another Pet by</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> summing each Pet&#x27;s age and name length.</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;other&quot;&gt;</span>The Pet to compare this Pet to.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>-1 if this Pet is &#x27;less&#x27; than the other Pet,</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 0 if they are equal,</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> or 1 if this Pet is &#x27;greater&#x27; than the other Pet.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="built_in">int</span> IComparable&lt;Pet&gt;.CompareTo(Pet other)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> sumOther = other.Age + other.Name.Length;</span><br><span class="line">        <span class="built_in">int</span> sumThis = <span class="keyword">this</span>.Age + <span class="keyword">this</span>.Name.Length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sumOther &gt; sumThis)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (sumOther == sumThis)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MaxEx3</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    Pet max = pets.Max();</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;The &#x27;maximum&#x27; animal is &#123;0&#125;.&quot;</span>,</span><br><span class="line">        max.Name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The &#x27;maximum&#x27; animal is Barley.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Min"><a href="#Min" class="headerlink" title="Min"></a>Min</h2><p>返回值序列中的最小值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>?[] grades = &#123; <span class="number">78</span>, <span class="number">92</span>, <span class="literal">null</span>, <span class="number">99</span>, <span class="number">37</span>, <span class="number">81</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>? min = grades.Min();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The lowest grade is &#123;0&#125;.&quot;</span>, min);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The lowest grade is 37.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span>[] doubles = &#123; <span class="number">1.5E+104</span>, <span class="number">9E+103</span>, <span class="number">-2E+103</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> min = doubles.Min();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The smallest number is &#123;0&#125;.&quot;</span>, min);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The smallest number is -2E+103.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MinEx4</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> min = pets.Min(pet =&gt; pet.Age);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;The youngest animal is age &#123;0&#125;.&quot;</span>, min);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The youngest animal is age 1.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> This class implements IComparable in order to</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> be able to compare different Pet objects.</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title">Pet</span> : <span class="title">IComparable</span>&lt;<span class="title">Pet</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> Compares this Pet&#x27;s age to another Pet&#x27;s age.</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;other&quot;&gt;</span>The Pet to compare this Pet to.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>-1 if this Pet&#x27;s age is smaller,</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 0 if the Pets&#x27; ages are equal, or</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 1 if this Pet&#x27;s age is greater.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="built_in">int</span> IComparable&lt;Pet&gt;.CompareTo(Pet other)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (other.Age &gt; <span class="keyword">this</span>.Age)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (other.Age == <span class="keyword">this</span>.Age)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MinEx3</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    Pet min = pets.Min();</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;The &#x27;minimum&#x27; animal is &#123;0&#125;.&quot;</span>,</span><br><span class="line">        min.Name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The &#x27;minimum&#x27; animal is Whiskers.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="OfType"><a href="#OfType" class="headerlink" title="OfType"></a>OfType</h2><p>根据指定类型筛选 IEnumerable 的元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">System.Collections.ArrayList fruits = <span class="keyword">new</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;Mango&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Orange&quot;</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&quot;Apple&quot;</span>,</span><br><span class="line">    <span class="number">3.0</span>,</span><br><span class="line">    <span class="string">&quot;Banana&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Apply OfType() to the ArrayList.</span></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query1 = fruits.OfType&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;Elements of type &#x27;string&#x27; are:&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query1)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fruit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The following query shows that the standard query operators such as</span></span><br><span class="line"><span class="comment">// Where() can be applied to the ArrayList type after calling OfType().</span></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query2 =</span><br><span class="line">    fruits.OfType&lt;<span class="built_in">string</span>&gt;().Where(fruit =&gt;</span><br><span class="line">    fruit.Contains(<span class="string">&#x27;n&#x27;</span>, StringComparison.CurrentCultureIgnoreCase));</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;\nThe following strings contain &#x27;n&#x27;:&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query2)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fruit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Elements of type &#x27;string&#x27; are:</span></span><br><span class="line"><span class="comment">// Mango</span></span><br><span class="line"><span class="comment">// Orange</span></span><br><span class="line"><span class="comment">// Apple</span></span><br><span class="line"><span class="comment">// Banana</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The following strings contain &#x27;n&#x27;:</span></span><br><span class="line"><span class="comment">// Mango</span></span><br><span class="line"><span class="comment">// Orange</span></span><br><span class="line"><span class="comment">// Banana</span></span><br></pre></td></tr></table></figure>

<h2 id="OrderBy"><a href="#OrderBy" class="headerlink" title="OrderBy"></a>OrderBy</h2><p>按升序对序列的元素进行排序。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OrderByEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet[] pets = &#123; <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Barley&quot;</span>, Age=<span class="number">8</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Boots&quot;</span>, Age=<span class="number">4</span> &#125;,</span><br><span class="line">                   <span class="keyword">new</span> Pet &#123; Name=<span class="string">&quot;Whiskers&quot;</span>, Age=<span class="number">1</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    IEnumerable&lt;Pet&gt; query = pets.OrderBy(pet =&gt; pet.Age);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (Pet pet <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;&#123;0&#125; - &#123;1&#125;&quot;</span>, pet.Name, pet.Age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Whiskers - 1</span></span><br><span class="line"><span class="comment"> Boots - 4</span></span><br><span class="line"><span class="comment"> Barley - 8</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="OrderByDescending"><a href="#OrderByDescending" class="headerlink" title="OrderByDescending"></a>OrderByDescending</h2><p>按降序对序列的元素排序。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> This IComparer class sorts by the fractional part of the decimal number.</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpecialComparer</span> : <span class="title">IComparer</span>&lt;<span class="title">decimal</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> Compare two decimal numbers by their fractional parts.</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;d1&quot;&gt;</span>The first decimal to compare.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;d2&quot;&gt;</span>The second decimal to compare.<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>1 if the first decimal&#x27;s fractional part</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> is greater than the second decimal&#x27;s fractional part,</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> -1 if the first decimal&#x27;s fractional</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> part is less than the second decimal&#x27;s fractional part,</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> or the result of calling Decimal.Compare()</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> if the fractional parts are equal.<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Compare</span>(<span class="params"><span class="built_in">decimal</span> d1, <span class="built_in">decimal</span> d2</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">decimal</span> fractional1, fractional2;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get the fractional part of the first number.</span></span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            fractional1 = <span class="built_in">decimal</span>.Remainder(d1, <span class="built_in">decimal</span>.Floor(d1));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (DivideByZeroException)</span><br><span class="line">        &#123;</span><br><span class="line">            fractional1 = d1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Get the fractional part of the second number.</span></span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            fractional2 = <span class="built_in">decimal</span>.Remainder(d2, <span class="built_in">decimal</span>.Floor(d2));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (DivideByZeroException)</span><br><span class="line">        &#123;</span><br><span class="line">            fractional2 = d2;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fractional1 == fractional2)</span><br><span class="line">            <span class="keyword">return</span> Decimal.Compare(d1, d2);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (fractional1 &gt; fractional2)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OrderByDescendingEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;<span class="built_in">decimal</span>&gt; decimals =</span><br><span class="line">        <span class="keyword">new</span> List&lt;<span class="built_in">decimal</span>&gt; &#123; <span class="number">6.2</span>m, <span class="number">8.3</span>m, <span class="number">0.5</span>m, <span class="number">1.3</span>m, <span class="number">6.3</span>m, <span class="number">9.7</span>m &#125;;</span><br><span class="line"></span><br><span class="line">    IEnumerable&lt;<span class="built_in">decimal</span>&gt; query =</span><br><span class="line">        decimals.OrderByDescending(num =&gt;</span><br><span class="line">                                       num, <span class="keyword">new</span> SpecialComparer());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">decimal</span> num <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 9.7</span></span><br><span class="line"><span class="comment"> 0.5</span></span><br><span class="line"><span class="comment"> 8.3</span></span><br><span class="line"><span class="comment"> 6.3</span></span><br><span class="line"><span class="comment"> 1.3</span></span><br><span class="line"><span class="comment"> 6.2</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h2><p>生成指定范围内的整数的序列。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Generate a sequence of integers from 1 to 10</span></span><br><span class="line"><span class="comment">// and then select their squares.</span></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; squares = Enumerable.Range(<span class="number">1</span>, <span class="number">10</span>).Select(x =&gt; x * x);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> squares)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 1</span></span><br><span class="line"><span class="comment"> 4</span></span><br><span class="line"><span class="comment"> 9</span></span><br><span class="line"><span class="comment"> 16</span></span><br><span class="line"><span class="comment"> 25</span></span><br><span class="line"><span class="comment"> 36</span></span><br><span class="line"><span class="comment"> 49</span></span><br><span class="line"><span class="comment"> 64</span></span><br><span class="line"><span class="comment"> 81</span></span><br><span class="line"><span class="comment"> 100</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h2><p>生成包含一个重复值的序列。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; strings =</span><br><span class="line">    Enumerable.Repeat(<span class="string">&quot;I like programming.&quot;</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (String str <span class="keyword">in</span> strings)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment"> I like programming.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Reverse"><a href="#Reverse" class="headerlink" title="Reverse"></a>Reverse</h2><p>反转序列中元素的顺序。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">char</span>[] apple = &#123; <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;e&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">char</span>[] reversed = apple.Reverse().ToArray();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">char</span> chr <span class="keyword">in</span> reversed)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(chr + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> e l p p a</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h2><p>将序列中的每个元素投影到新表单。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;orange&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query =</span><br><span class="line">    fruits.Select((fruit, index) =&gt;</span><br><span class="line">                      <span class="keyword">new</span> &#123; index, str = fruit.Substring(<span class="number">0</span>, index) &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> obj <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;&#123;0&#125;&quot;</span>, obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> &#123; index = 0, str =  &#125;</span></span><br><span class="line"><span class="comment"> &#123; index = 1, str = b &#125;</span></span><br><span class="line"><span class="comment"> &#123; index = 2, str = ma &#125;</span></span><br><span class="line"><span class="comment"> &#123; index = 3, str = ora &#125;</span></span><br><span class="line"><span class="comment"> &#123; index = 4, str = pass &#125;</span></span><br><span class="line"><span class="comment"> &#123; index = 5, str = grape &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; squares =</span><br><span class="line">    Enumerable.Range(<span class="number">1</span>, <span class="number">10</span>).Select(x =&gt; x * x);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> squares)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 1</span></span><br><span class="line"><span class="comment"> 4</span></span><br><span class="line"><span class="comment"> 9</span></span><br><span class="line"><span class="comment"> 16</span></span><br><span class="line"><span class="comment"> 25</span></span><br><span class="line"><span class="comment"> 36</span></span><br><span class="line"><span class="comment"> 49</span></span><br><span class="line"><span class="comment"> 64</span></span><br><span class="line"><span class="comment"> 81</span></span><br><span class="line"><span class="comment"> 100</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="SelectMany"><a href="#SelectMany" class="headerlink" title="SelectMany"></a>SelectMany</h2><p>将序列的每个元素投影到 IEnumerable<T> 并将结果序列合并为一个序列。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">PetOwner</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; Pets &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SelectManyEx3</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    PetOwner[] petOwners =</span><br><span class="line">        &#123; <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Higa&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Scruffy&quot;</span>, <span class="string">&quot;Sam&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Ashkenazi&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Walker&quot;</span>, <span class="string">&quot;Sugar&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Price&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Scratches&quot;</span>, <span class="string">&quot;Diesel&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Hines&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Dusty&quot;</span> &#125; &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Project the pet owner&#x27;s name and the pet&#x27;s name.</span></span><br><span class="line">    <span class="keyword">var</span> query =</span><br><span class="line">        petOwners</span><br><span class="line">        .SelectMany(petOwner =&gt; petOwner.Pets, (petOwner, petName) =&gt; <span class="keyword">new</span> &#123; petOwner, petName &#125;)</span><br><span class="line">        .Where(ownerAndPet =&gt; ownerAndPet.petName.StartsWith(<span class="string">&quot;S&quot;</span>))</span><br><span class="line">        .Select(ownerAndPet =&gt;</span><br><span class="line">                <span class="keyword">new</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Owner = ownerAndPet.petOwner.Name,</span><br><span class="line">                    Pet = ownerAndPet.petName</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Print the results.</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> obj <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// &#123;Owner=Higa, Pet=Scruffy&#125;</span></span><br><span class="line"><span class="comment">// &#123;Owner=Higa, Pet=Sam&#125;</span></span><br><span class="line"><span class="comment">// &#123;Owner=Ashkenazi, Pet=Sugar&#125;</span></span><br><span class="line"><span class="comment">// &#123;Owner=Price, Pet=Scratches&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">PetOwner</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; Pets &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SelectManyEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    PetOwner[] petOwners =</span><br><span class="line">        &#123; <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Higa, Sidney&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Scruffy&quot;</span>, <span class="string">&quot;Sam&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Ashkenazi, Ronen&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Walker&quot;</span>, <span class="string">&quot;Sugar&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Price, Vernette&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Scratches&quot;</span>, <span class="string">&quot;Diesel&quot;</span> &#125; &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Query using SelectMany().</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; query1 = petOwners.SelectMany(petOwner =&gt; petOwner.Pets);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;Using SelectMany():&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Only one foreach loop is required to iterate</span></span><br><span class="line">    <span class="comment">// through the results since it is a</span></span><br><span class="line">    <span class="comment">// one-dimensional collection.</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> pet <span class="keyword">in</span> query1)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(pet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This code shows how to use Select()</span></span><br><span class="line">    <span class="comment">// instead of SelectMany().</span></span><br><span class="line">    IEnumerable&lt;List&lt;String&gt;&gt; query2 =</span><br><span class="line">        petOwners.Select(petOwner =&gt; petOwner.Pets);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;\nUsing Select():&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Notice that two foreach loops are required to</span></span><br><span class="line">    <span class="comment">// iterate through the results</span></span><br><span class="line">    <span class="comment">// because the query returns a collection of arrays.</span></span><br><span class="line">    <span class="keyword">foreach</span> (List&lt;String&gt; petList <span class="keyword">in</span> query2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">string</span> pet <span class="keyword">in</span> petList)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(pet);</span><br><span class="line">        &#125;</span><br><span class="line">        Console.WriteLine();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Using SelectMany():</span></span><br><span class="line"><span class="comment"> Scruffy</span></span><br><span class="line"><span class="comment"> Sam</span></span><br><span class="line"><span class="comment"> Walker</span></span><br><span class="line"><span class="comment"> Sugar</span></span><br><span class="line"><span class="comment"> Scratches</span></span><br><span class="line"><span class="comment"> Diesel</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Using Select():</span></span><br><span class="line"><span class="comment"> Scruffy</span></span><br><span class="line"><span class="comment"> Sam</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Walker</span></span><br><span class="line"><span class="comment"> Sugar</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Scratches</span></span><br><span class="line"><span class="comment"> Diesel</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">PetOwner</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="built_in">string</span>&gt; Pets &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SelectManyEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    PetOwner[] petOwners =</span><br><span class="line">        &#123; <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Higa, Sidney&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Scruffy&quot;</span>, <span class="string">&quot;Sam&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Ashkenazi, Ronen&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Walker&quot;</span>, <span class="string">&quot;Sugar&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Price, Vernette&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Scratches&quot;</span>, <span class="string">&quot;Diesel&quot;</span> &#125; &#125;,</span><br><span class="line">          <span class="keyword">new</span> PetOwner &#123; Name=<span class="string">&quot;Hines, Patrick&quot;</span>,</span><br><span class="line">              Pets = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;&#123; <span class="string">&quot;Dusty&quot;</span> &#125; &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Project the items in the array by appending the index</span></span><br><span class="line">    <span class="comment">// of each PetOwner to each pet&#x27;s name in that petOwner&#x27;s</span></span><br><span class="line">    <span class="comment">// array of pets.</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">        petOwners.SelectMany((petOwner, index) =&gt;</span><br><span class="line">                                 petOwner.Pets.Select(pet =&gt; index + pet));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> pet <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(pet);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 0Scruffy</span></span><br><span class="line"><span class="comment">// 0Sam</span></span><br><span class="line"><span class="comment">// 1Walker</span></span><br><span class="line"><span class="comment">// 1Sugar</span></span><br><span class="line"><span class="comment">// 2Scratches</span></span><br><span class="line"><span class="comment">// 2Diesel</span></span><br><span class="line"><span class="comment">// 3Dusty</span></span><br></pre></td></tr></table></figure>

<h2 id="SequenceEqual"><a href="#SequenceEqual" class="headerlink" title="SequenceEqual"></a>SequenceEqual</h2><p>根据相等比较器确定两个序列是否相等。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SequenceEqualEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet pet1 = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Turbo&quot;</span>, Age = <span class="number">2</span> &#125;;</span><br><span class="line">    Pet pet2 = <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Peanut&quot;</span>, Age = <span class="number">8</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create two lists of pets.</span></span><br><span class="line">    List&lt;Pet&gt; pets1 = <span class="keyword">new</span> List&lt;Pet&gt; &#123; pet1, pet2 &#125;;</span><br><span class="line">    List&lt;Pet&gt; pets2 = <span class="keyword">new</span> List&lt;Pet&gt; &#123; pet1, pet2 &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">bool</span> equal = pets1.SequenceEqual(pets2);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">&quot;The lists &#123;0&#125; equal.&quot;</span>,</span><br><span class="line">        equal ? <span class="string">&quot;are&quot;</span> : <span class="string">&quot;are not&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The lists are equal.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Pet</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SequenceEqualEx2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Pet pet1 = <span class="keyword">new</span> Pet() &#123; Name = <span class="string">&quot;Turbo&quot;</span>, Age = <span class="number">2</span> &#125;;</span><br><span class="line">    Pet pet2 = <span class="keyword">new</span> Pet() &#123; Name = <span class="string">&quot;Peanut&quot;</span>, Age = <span class="number">8</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create two lists of pets.</span></span><br><span class="line">    List&lt;Pet&gt; pets1 = <span class="keyword">new</span> List&lt;Pet&gt; &#123; pet1, pet2 &#125;;</span><br><span class="line">    List&lt;Pet&gt; pets2 =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Pet&gt; &#123; <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Turbo&quot;</span>, Age = <span class="number">2</span> &#125;,</span><br><span class="line">                        <span class="keyword">new</span> Pet &#123; Name = <span class="string">&quot;Peanut&quot;</span>, Age = <span class="number">8</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">bool</span> equal = pets1.SequenceEqual(pets2);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;The lists &#123;0&#125; equal.&quot;</span>, equal ? <span class="string">&quot;are&quot;</span> : <span class="string">&quot;are not&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">序列包含相同的数据，但由于它们包含的对象具有不同的引用，因此序列不被视为相等。</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The lists are not equal.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProductA</span> : <span class="title">IEquatable</span>&lt;<span class="title">ProductA</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">ProductA other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (other <span class="keyword">is</span> <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.Name == other.Name &amp;&amp; <span class="keyword">this</span>.Code == other.Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params"><span class="built_in">object</span> obj</span>)</span> =&gt; Equals(obj <span class="keyword">as</span> ProductA);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>()</span> =&gt; (Name, Code).GetHashCode();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ProductA[] storeA = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">ProductA[] storeB = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> equalAB = storeA.SequenceEqual(storeB);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;Equal? &quot;</span> + equalAB);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Equal? True</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Custom comparer for the Product class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">ProductComparer</span> : <span class="title">IEqualityComparer</span>&lt;<span class="title">Product</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Products are equal if their names and product numbers are equal.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">Product x, Product y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the compared objects reference the same data.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether any of the compared objects is null.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, <span class="literal">null</span>) || Object.ReferenceEquals(y, <span class="literal">null</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the products&#x27; properties are equal.</span></span><br><span class="line">        <span class="keyword">return</span> x.Code == y.Code &amp;&amp; x.Name == y.Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If Equals() returns true for a pair of objects</span></span><br><span class="line">    <span class="comment">// then GetHashCode() must return the same value for these objects.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>(<span class="params">Product product</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Check whether the object is null</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(product, <span class="literal">null</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Name field if it is not null.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductName = product.Name == <span class="literal">null</span> ? <span class="number">0</span> : product.Name.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Code field.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductCode = product.Code.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Calculate the hash code for the product.</span></span><br><span class="line">        <span class="keyword">return</span> hashProductName ^ hashProductCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Product[] storeA = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">Product[] storeB = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> equalAB = storeA.SequenceEqual(storeB, <span class="keyword">new</span> ProductComparer());</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;Equal? &quot;</span> + equalAB);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    Equal? True</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Single"><a href="#Single" class="headerlink" title="Single"></a>Single</h2><p>返回序列中的单个特定元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> fruit1 = fruits.Single(fruit =&gt; fruit.Length &gt; <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(fruit1);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> passionfruit</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fruit2 = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    fruit2 = fruits.Single(fruit =&gt; fruit.Length &gt; <span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (System.InvalidOperationException)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">@&quot;The collection does not contain exactly</span></span><br><span class="line"><span class="string">                    one element whose length is greater than 15.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(fruit2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This code produces the following output:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The collection does not contain exactly</span></span><br><span class="line"><span class="comment">// one element whose length is greater than 15.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits1 = &#123; <span class="string">&quot;orange&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> fruit1 = fruits1.Single();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(fruit1);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> orange</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits2 = &#123; <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;apple&quot;</span> &#125;;</span><br><span class="line"><span class="built_in">string</span> fruit2 = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    fruit2 = fruits2.Single();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (System.InvalidOperationException)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;The collection does not contain exactly one element.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(fruit2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The collection does not contain exactly one element.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="SingleOrDefault"><a href="#SingleOrDefault" class="headerlink" title="SingleOrDefault"></a>SingleOrDefault</h2><p>返回序列中的单个特定元素；如果未找到该元素，则返回默认值。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits1 = &#123; <span class="string">&quot;orange&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> fruit1 = fruits1.SingleOrDefault();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(fruit1);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> orange</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits2 = &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> fruit2 = fruits2.SingleOrDefault();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    String.IsNullOrEmpty(fruit2) ? <span class="string">&quot;No such string!&quot;</span> : fruit2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> No such string!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] pageNumbers = &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting the default value to 1 after the query.</span></span><br><span class="line"><span class="built_in">int</span> pageNumber1 = pageNumbers.SingleOrDefault();</span><br><span class="line"><span class="keyword">if</span> (pageNumber1 == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    pageNumber1 = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;The value of the pageNumber1 variable is &#123;0&#125;&quot;</span>, pageNumber1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setting the default value to 1 by using DefaultIfEmpty() in the query.</span></span><br><span class="line"><span class="built_in">int</span> pageNumber2 = pageNumbers.DefaultIfEmpty(<span class="number">1</span>).Single();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;The value of the pageNumber2 variable is &#123;0&#125;&quot;</span>, pageNumber2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The value of the pageNumber1 variable is 1</span></span><br><span class="line"><span class="comment"> The value of the pageNumber2 variable is 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;grape&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> fruit1 = fruits.SingleOrDefault(fruit =&gt; fruit.Length &gt; <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(fruit1);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> passionfruit</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fruit2 =</span><br><span class="line">    fruits.SingleOrDefault(fruit =&gt; fruit.Length &gt; <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(</span><br><span class="line">    String.IsNullOrEmpty(fruit2) ? <span class="string">&quot;No such string!&quot;</span> : fruit2);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> No such string!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Skip"><a href="#Skip" class="headerlink" title="Skip"></a>Skip</h2><p>跳过序列中指定数量的元素，然后返回剩余的元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] grades = &#123; <span class="number">59</span>, <span class="number">82</span>, <span class="number">70</span>, <span class="number">56</span>, <span class="number">92</span>, <span class="number">98</span>, <span class="number">85</span> &#125;;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;All grades except the first three:&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> grade <span class="keyword">in</span> grades.Skip(<span class="number">3</span>))</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(grade);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">All grades except the first three:</span></span><br><span class="line"><span class="comment"> 56</span></span><br><span class="line"><span class="comment"> 92</span></span><br><span class="line"><span class="comment"> 98</span></span><br><span class="line"><span class="comment"> 85</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="SkipWhile"><a href="#SkipWhile" class="headerlink" title="SkipWhile"></a>SkipWhile</h2><p>如果指定的条件为 true，则跳过序列中的元素，然后返回剩余的元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] grades = &#123; <span class="number">59</span>, <span class="number">82</span>, <span class="number">70</span>, <span class="number">56</span>, <span class="number">92</span>, <span class="number">98</span>, <span class="number">85</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; lowerGrades =</span><br><span class="line">    grades</span><br><span class="line">    .OrderByDescending(grade =&gt; grade)</span><br><span class="line">    .SkipWhile(grade =&gt; grade &gt;= <span class="number">80</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;All grades below 80:&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> grade <span class="keyword">in</span> lowerGrades)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(grade);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> All grades below 80:</span></span><br><span class="line"><span class="comment"> 70</span></span><br><span class="line"><span class="comment"> 59</span></span><br><span class="line"><span class="comment"> 56</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] amounts = &#123; <span class="number">5000</span>, <span class="number">2500</span>, <span class="number">9000</span>, <span class="number">8000</span>,</span><br><span class="line">                    <span class="number">6500</span>, <span class="number">4000</span>, <span class="number">1500</span>, <span class="number">5500</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; query =</span><br><span class="line">    amounts.SkipWhile((amount, index) =&gt; amount &gt; index * <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> amount <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(amount);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 4000</span></span><br><span class="line"><span class="comment"> 1500</span></span><br><span class="line"><span class="comment"> 5500</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Sum"><a href="#Sum" class="headerlink" title="Sum"></a>Sum</h2><p>计算数值序列的和。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">float</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">float</span>&gt; &#123; <span class="number">43.68F</span>, <span class="number">1.25F</span>, <span class="number">583.7F</span>, <span class="number">6.5F</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">float</span> sum = numbers.Sum();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The sum of the numbers is &#123;0&#125;.&quot;</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The sum of the numbers is 635.13.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span>?[] points = &#123; <span class="literal">null</span>, <span class="number">0</span>, <span class="number">92.83F</span>, <span class="literal">null</span>, <span class="number">100.0F</span>, <span class="number">37.46F</span>, <span class="number">81.1F</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">float</span>? sum = points.Sum();</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;Total points earned: &#123;0&#125;&quot;</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Total points earned: 311.39</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Package</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Company &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Weight &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SumEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Package&gt; packages =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Package&gt;</span><br><span class="line">            &#123; <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Coho Vineyard&quot;</span>, Weight = <span class="number">25.2</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Lucerne Publishing&quot;</span>, Weight = <span class="number">18.7</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Wingtip Toys&quot;</span>, Weight = <span class="number">6.0</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Adventure Works&quot;</span>, Weight = <span class="number">33.8</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> totalWeight = packages.Sum(pkg =&gt; pkg.Weight);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;The total weight of the packages is: &#123;0&#125;&quot;</span>, totalWeight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The total weight of the packages is: 83.7</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Take"><a href="#Take" class="headerlink" title="Take"></a>Take</h2><p>从序列的开头返回指定数量的相邻元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] grades = &#123; <span class="number">59</span>, <span class="number">82</span>, <span class="number">70</span>, <span class="number">56</span>, <span class="number">92</span>, <span class="number">98</span>, <span class="number">85</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; topThreeGrades =</span><br><span class="line">    grades.OrderByDescending(grade =&gt; grade).Take(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;The top three grades are:&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> grade <span class="keyword">in</span> topThreeGrades)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(grade);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> The top three grades are:</span></span><br><span class="line"><span class="comment"> 98</span></span><br><span class="line"><span class="comment"> 92</span></span><br><span class="line"><span class="comment"> 85</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="TakeWhile"><a href="#TakeWhile" class="headerlink" title="TakeWhile"></a>TakeWhile</h2><p>如果指定的条件为 true，则返回序列中的元素，然后跳过剩余的元素。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;blueberry&quot;</span>, <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;strawberry&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">    fruits.TakeWhile((fruit, index) =&gt; fruit.Length &gt;= index);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fruit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> apple</span></span><br><span class="line"><span class="comment"> passionfruit</span></span><br><span class="line"><span class="comment"> banana</span></span><br><span class="line"><span class="comment"> mango</span></span><br><span class="line"><span class="comment"> orange</span></span><br><span class="line"><span class="comment"> blueberry</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ThenBy"><a href="#ThenBy" class="headerlink" title="ThenBy"></a>ThenBy</h2><p>按升序对序列中的元素执行后续排序。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;raspberry&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;blueberry&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sort the strings first by their length and then</span></span><br><span class="line"><span class="comment">//alphabetically by passing the identity selector function.</span></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">    fruits.OrderBy(fruit =&gt; fruit.Length).ThenBy(fruit =&gt; fruit);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fruit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    apple</span></span><br><span class="line"><span class="comment">    grape</span></span><br><span class="line"><span class="comment">    mango</span></span><br><span class="line"><span class="comment">    banana</span></span><br><span class="line"><span class="comment">    orange</span></span><br><span class="line"><span class="comment">    blueberry</span></span><br><span class="line"><span class="comment">    raspberry</span></span><br><span class="line"><span class="comment">    passionfruit</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ThenByDescending"><a href="#ThenByDescending" class="headerlink" title="ThenByDescending"></a>ThenByDescending</h2><p>按降序对序列中的元素执行后续排序。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CaseInsensitiveComparer</span> : <span class="title">IComparer</span>&lt;<span class="title">string</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Compare</span>(<span class="params"><span class="built_in">string</span> x, <span class="built_in">string</span> y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">string</span>.Compare(x, y, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ThenByDescendingEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apPLe&quot;</span>, <span class="string">&quot;baNanA&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;APple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;BAnana&quot;</span>, <span class="string">&quot;ORANGE&quot;</span>, <span class="string">&quot;apPLE&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sort the strings first ascending by their length and</span></span><br><span class="line">    <span class="comment">// then descending using a custom case insensitive comparer.</span></span><br><span class="line">    IEnumerable&lt;<span class="built_in">string</span>&gt; query =</span><br><span class="line">        fruits</span><br><span class="line">        .OrderBy(fruit =&gt; fruit.Length)</span><br><span class="line">        .ThenByDescending(fruit =&gt; fruit, <span class="keyword">new</span> CaseInsensitiveComparer());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(fruit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    apPLe</span></span><br><span class="line"><span class="comment">    apple</span></span><br><span class="line"><span class="comment">    APple</span></span><br><span class="line"><span class="comment">    apPLE</span></span><br><span class="line"><span class="comment">    orange</span></span><br><span class="line"><span class="comment">    ORANGE</span></span><br><span class="line"><span class="comment">    baNanA</span></span><br><span class="line"><span class="comment">    BAnana</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ToArray"><a href="#ToArray" class="headerlink" title="ToArray"></a>ToArray</h2><p>从 IEnumerable<T> 中创建数组。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Package</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Company &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Weight &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToArrayEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Package&gt; packages =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Package&gt;</span><br><span class="line">            &#123; <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Coho Vineyard&quot;</span>, Weight = <span class="number">25.2</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Lucerne Publishing&quot;</span>, Weight = <span class="number">18.7</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Wingtip Toys&quot;</span>, Weight = <span class="number">6.0</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Adventure Works&quot;</span>, Weight = <span class="number">33.8</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span>[] companies = packages.Select(pkg =&gt; pkg.Company).ToArray();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="built_in">string</span> company <span class="keyword">in</span> companies)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(company);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Coho Vineyard</span></span><br><span class="line"><span class="comment"> Lucerne Publishing</span></span><br><span class="line"><span class="comment"> Wingtip Toys</span></span><br><span class="line"><span class="comment"> Adventure Works</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ToDictionary"><a href="#ToDictionary" class="headerlink" title="ToDictionary"></a>ToDictionary</h2><p>从 IEnumerable<T> 创建一个 Dictionary&lt;TKey,TValue&gt;。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Package</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Company &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Weight &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">long</span> TrackingNumber &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToDictionaryEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Package&gt; packages =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Package&gt;</span><br><span class="line">            &#123; <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Coho Vineyard&quot;</span>, Weight = <span class="number">25.2</span>, TrackingNumber = <span class="number">89453312L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Lucerne Publishing&quot;</span>, Weight = <span class="number">18.7</span>, TrackingNumber = <span class="number">89112755L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Wingtip Toys&quot;</span>, Weight = <span class="number">6.0</span>, TrackingNumber = <span class="number">299456122L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Adventure Works&quot;</span>, Weight = <span class="number">33.8</span>, TrackingNumber = <span class="number">4665518773L</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a Dictionary of Package objects,</span></span><br><span class="line">    <span class="comment">// using TrackingNumber as the key.</span></span><br><span class="line">    Dictionary&lt;<span class="built_in">long</span>, Package&gt; dictionary =</span><br><span class="line">        packages.ToDictionary(p =&gt; p.TrackingNumber);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (KeyValuePair&lt;<span class="built_in">long</span>, Package&gt; kvp <span class="keyword">in</span> dictionary)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(</span><br><span class="line">            <span class="string">&quot;Key &#123;0&#125;: &#123;1&#125;, &#123;2&#125; pounds&quot;</span>,</span><br><span class="line">            kvp.Key,</span><br><span class="line">            kvp.Value.Company,</span><br><span class="line">            kvp.Value.Weight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Key 89453312: Coho Vineyard, 25.2 pounds</span></span><br><span class="line"><span class="comment"> Key 89112755: Lucerne Publishing, 18.7 pounds</span></span><br><span class="line"><span class="comment"> Key 299456122: Wingtip Toys, 6 pounds</span></span><br><span class="line"><span class="comment"> Key 4665518773: Adventure Works, 33.8 pounds</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ToList"><a href="#ToList" class="headerlink" title="ToList"></a>ToList</h2><p>从 IEnumerable<T> 创建一个 List<T>。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] fruits = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;blueberry&quot;</span>, <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;strawberry&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">List&lt;<span class="built_in">int</span>&gt; lengths = fruits.Select(fruit =&gt; fruit.Length).ToList();</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> length <span class="keyword">in</span> lengths)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 5</span></span><br><span class="line"><span class="comment"> 12</span></span><br><span class="line"><span class="comment"> 6</span></span><br><span class="line"><span class="comment"> 5</span></span><br><span class="line"><span class="comment"> 6</span></span><br><span class="line"><span class="comment"> 9</span></span><br><span class="line"><span class="comment"> 5</span></span><br><span class="line"><span class="comment"> 10</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="ToLookup"><a href="#ToLookup" class="headerlink" title="ToLookup"></a>ToLookup</h2><p>从 IEnumerable<T> 生成一个泛型 Lookup&lt;TKey,TElement&gt;。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Package</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Company &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Weight &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">long</span> TrackingNumber &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ToLookupEx1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Create a list of Packages.</span></span><br><span class="line">    List&lt;Package&gt; packages =</span><br><span class="line">        <span class="keyword">new</span> List&lt;Package&gt;</span><br><span class="line">            &#123; <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Coho Vineyard&quot;</span>,</span><br><span class="line">                  Weight = <span class="number">25.2</span>, TrackingNumber = <span class="number">89453312L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Lucerne Publishing&quot;</span>,</span><br><span class="line">                  Weight = <span class="number">18.7</span>, TrackingNumber = <span class="number">89112755L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Wingtip Toys&quot;</span>,</span><br><span class="line">                  Weight = <span class="number">6.0</span>, TrackingNumber = <span class="number">299456122L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Contoso Pharmaceuticals&quot;</span>,</span><br><span class="line">                  Weight = <span class="number">9.3</span>, TrackingNumber = <span class="number">670053128L</span> &#125;,</span><br><span class="line">              <span class="keyword">new</span> Package &#123; Company = <span class="string">&quot;Wide World Importers&quot;</span>,</span><br><span class="line">                  Weight = <span class="number">33.8</span>, TrackingNumber = <span class="number">4665518773L</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a Lookup to organize the packages.</span></span><br><span class="line">    <span class="comment">// Use the first character of Company as the key value.</span></span><br><span class="line">    <span class="comment">// Select Company appended to TrackingNumber</span></span><br><span class="line">    <span class="comment">// as the element values of the Lookup.</span></span><br><span class="line">    ILookup&lt;<span class="built_in">char</span>, <span class="built_in">string</span>&gt; lookup =</span><br><span class="line">        packages</span><br><span class="line">        .ToLookup(p =&gt; p.Company[<span class="number">0</span>],</span><br><span class="line">                  p =&gt; p.Company + <span class="string">&quot; &quot;</span> + p.TrackingNumber);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterate through each IGrouping in the Lookup.</span></span><br><span class="line">    <span class="keyword">foreach</span> (IGrouping&lt;<span class="built_in">char</span>, <span class="built_in">string</span>&gt; packageGroup <span class="keyword">in</span> lookup)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Print the key value of the IGrouping.</span></span><br><span class="line">        Console.WriteLine(packageGroup.Key);</span><br><span class="line">        <span class="comment">// Iterate through each value in the</span></span><br><span class="line">        <span class="comment">// IGrouping and print its value.</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">string</span> str <span class="keyword">in</span> packageGroup)</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;    &#123;0&#125;&quot;</span>, str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> C</span></span><br><span class="line"><span class="comment">     Coho Vineyard 89453312</span></span><br><span class="line"><span class="comment">     Contoso Pharmaceuticals 670053128</span></span><br><span class="line"><span class="comment"> L</span></span><br><span class="line"><span class="comment">     Lucerne Publishing 89112755</span></span><br><span class="line"><span class="comment"> W</span></span><br><span class="line"><span class="comment">     Wingtip Toys 299456122</span></span><br><span class="line"><span class="comment">     Wide World Importers 4665518773</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h2><p>生成两个序列的并集。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] ints1 = &#123; <span class="number">5</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span> &#125;;</span><br><span class="line"><span class="built_in">int</span>[] ints2 = &#123; <span class="number">8</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; union = ints1.Union(ints2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> union)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;&#123;0&#125; &quot;</span>, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 5 3 9 7 8 6 4 1 0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProductA</span> : <span class="title">IEquatable</span>&lt;<span class="title">ProductA</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">ProductA other</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (other <span class="keyword">is</span> <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.Name == other.Name &amp;&amp; <span class="keyword">this</span>.Code == other.Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params"><span class="built_in">object</span> obj</span>)</span> =&gt; Equals(obj <span class="keyword">as</span> ProductA);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>()</span> =&gt; (Name, Code).GetHashCode();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ProductA[] store1 = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">ProductA[] store2 = &#123; <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> ProductA &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Get the products from the both arrays</span></span><br><span class="line"><span class="comment">//excluding duplicates.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;ProductA&gt; union =</span><br><span class="line">  store1.Union(store2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> union)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    apple 9</span></span><br><span class="line"><span class="comment">    orange 4</span></span><br><span class="line"><span class="comment">    lemon 12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Custom comparer for the Product class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">ProductComparer</span> : <span class="title">IEqualityComparer</span>&lt;<span class="title">Product</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Products are equal if their names and product numbers are equal.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Equals</span>(<span class="params">Product x, Product y</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the compared objects reference the same data.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether any of the compared objects is null.</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(x, <span class="literal">null</span>) || Object.ReferenceEquals(y, <span class="literal">null</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Check whether the products&#x27; properties are equal.</span></span><br><span class="line">        <span class="keyword">return</span> x.Code == y.Code &amp;&amp; x.Name == y.Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If Equals() returns true for a pair of objects</span></span><br><span class="line">    <span class="comment">// then GetHashCode() must return the same value for these objects.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">GetHashCode</span>(<span class="params">Product product</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Check whether the object is null</span></span><br><span class="line">        <span class="keyword">if</span> (Object.ReferenceEquals(product, <span class="literal">null</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Name field if it is not null.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductName = product.Name == <span class="literal">null</span> ? <span class="number">0</span> : product.Name.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Get hash code for the Code field.</span></span><br><span class="line">        <span class="built_in">int</span> hashProductCode = product.Code.GetHashCode();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Calculate the hash code for the product.</span></span><br><span class="line">        <span class="keyword">return</span> hashProductName ^ hashProductCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Product[] store10 = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;orange&quot;</span>, Code = <span class="number">4</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line">Product[] store20 = &#123; <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;apple&quot;</span>, Code = <span class="number">9</span> &#125;,</span><br><span class="line">                       <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;lemon&quot;</span>, Code = <span class="number">12</span> &#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Get the products from the both arrays</span></span><br><span class="line"><span class="comment">//excluding duplicates.</span></span><br><span class="line"></span><br><span class="line">IEnumerable&lt;Product&gt; union =</span><br><span class="line">  store10.Union(store20, <span class="keyword">new</span> ProductComparer());</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (Product product <span class="keyword">in</span> union)</span><br><span class="line">    Console.WriteLine(product.Name + <span class="string">&quot; &quot;</span> + product.Code);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    apple 9</span></span><br><span class="line"><span class="comment">    orange 4</span></span><br><span class="line"><span class="comment">    lemon 12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Where"><a href="#Where" class="headerlink" title="Where"></a>Where</h2><p>基于谓词筛选值序列。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">string</span>&gt; fruits =</span><br><span class="line">    <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt; &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;passionfruit&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;mango&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;blueberry&quot;</span>, <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;strawberry&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">string</span>&gt; query = fruits.Where(fruit =&gt; fruit.Length &lt; <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> fruit <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(fruit);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> apple</span></span><br><span class="line"><span class="comment"> mango</span></span><br><span class="line"><span class="comment"> grape</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] numbers = &#123; <span class="number">0</span>, <span class="number">30</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">90</span>, <span class="number">85</span>, <span class="number">40</span>, <span class="number">75</span> &#125;;</span><br><span class="line"></span><br><span class="line">IEnumerable&lt;<span class="built_in">int</span>&gt; query =</span><br><span class="line">    numbers.Where((number, index) =&gt; number &lt;= index * <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> number <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(number);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 0</span></span><br><span class="line"><span class="comment"> 20</span></span><br><span class="line"><span class="comment"> 15</span></span><br><span class="line"><span class="comment"> 40</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LINQ/">LINQ</a></div><div class="post-share"><div class="social-share" data-image="/images/4stars.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/19/RevitApi%E5%90%88%E9%9B%86/Autodesk.Revit.UI.Selection%20Namespace/" title="Autodesk.Revit.UI.Selection"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Autodesk.Revit.UI.Selection</div></div><div class="info-2"><div class="info-item-1">Autodesk.Revit.UI.SelectionClassesPickedBox包含两个 XYZ 点的类，表示屏幕上的选取框。  Properties  Max 最大坐标数（拾取框的右上角）。  Min 最小坐标（拾取框的左下角）。     SelectableInViewFilter一个过滤器，用于传递在给定视图中可选的元素。  Constructors  SelectableInViewFilter  (Document, ElementId) 构造 SelectableInViewFilter 的新实例。  SelectableInViewFilter (Document, ElementId, Boolean) 构造 SelectableInViewFilter 的新实例，并可选择传递所有不可选择的元素。    Methods  PassesFilter(Element) 将筛选器应用于给定元素。  PassesFilter(Document,...</div></div></div></a><a class="pagination-related" href="/2024/12/15/Revit%E4%BA%8C%E5%BC%80%E6%8C%87%E5%8D%97/19%E8%8D%89%E5%9B%BE/" title="19草图"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">19草图</div></div><div class="info-2"><div class="info-item-1">草图要在Revit中创建图元或编辑其轮廓，必须先创建草图对象。需要绘制草图的图元示例包括：  Roofs 屋顶 Floors 地板 Stairs 楼梯 Railings 栏杆  还需要草图来定义其他类型的几何图形，例如：  Extrusions 拉伸 Openings 开口 Regions 区域  在Revit Platform API中，草图函数由二维和三维草图类表示，如下所示：  二维Sketch： SketchPlane 草图平面 Sketch 草图 ModelCurve 模型线 and more   三维Sketch： GenericForm 通用形状 Path3D 3D路径    除了草图元素外，本章还介绍了ModelCurve。有关元素分类的详细信息，请参阅元素部分中的元素分类。  本节中的页面  2DSketch类 3DSketch 模型线  2D...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/4stars.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">funtim41@gmail.com</div><div class="author-info-description">实践-认识-再实践-再认识</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">56</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/FunTim41"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/FunTim41" target="_blank" title="Github"><i class="fab fa-github" style="color: #FFFFFF;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linq%E6%A0%87%E5%87%86%E6%9F%A5%E8%AF%A2%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.</span> <span class="toc-text">Linq标准查询运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%EF%BC%9A%E6%95%B4%E7%90%86%E8%87%AAC-%E4%B8%AD%E7%9A%84-LINQ-%E6%9F%A5%E8%AF%A2%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">注：整理自C# 中的 LINQ 查询简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aggregate"><span class="toc-number">1.2.</span> <span class="toc-text">Aggregate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#All"><span class="toc-number">1.3.</span> <span class="toc-text">All</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Any"><span class="toc-number">1.4.</span> <span class="toc-text">Any</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AsEnumerable"><span class="toc-number">1.5.</span> <span class="toc-text">AsEnumerable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Average"><span class="toc-number">1.6.</span> <span class="toc-text">Average</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cast"><span class="toc-number">1.7.</span> <span class="toc-text">Cast</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Concat"><span class="toc-number">1.8.</span> <span class="toc-text">Concat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Contains"><span class="toc-number">1.9.</span> <span class="toc-text">Contains</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Count"><span class="toc-number">1.10.</span> <span class="toc-text">Count</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DefaultIfEmpty"><span class="toc-number">1.11.</span> <span class="toc-text">DefaultIfEmpty</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Distinct"><span class="toc-number">1.12.</span> <span class="toc-text">Distinct</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ElementAt"><span class="toc-number">1.13.</span> <span class="toc-text">ElementAt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ElementAtOrDefault"><span class="toc-number">1.14.</span> <span class="toc-text">ElementAtOrDefault</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Empty"><span class="toc-number">1.15.</span> <span class="toc-text">Empty</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Except"><span class="toc-number">1.16.</span> <span class="toc-text">Except</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#First"><span class="toc-number">1.17.</span> <span class="toc-text">First</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FirstOrDefault"><span class="toc-number">1.18.</span> <span class="toc-text">FirstOrDefault</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GroupBy"><span class="toc-number">1.19.</span> <span class="toc-text">GroupBy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GroupJoin"><span class="toc-number">1.20.</span> <span class="toc-text">GroupJoin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Intersect"><span class="toc-number">1.21.</span> <span class="toc-text">Intersect</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Join"><span class="toc-number">1.22.</span> <span class="toc-text">Join</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Last"><span class="toc-number">1.23.</span> <span class="toc-text">Last</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LastOrDefault"><span class="toc-number">1.24.</span> <span class="toc-text">LastOrDefault</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LongCount"><span class="toc-number">1.25.</span> <span class="toc-text">LongCount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Max"><span class="toc-number">1.26.</span> <span class="toc-text">Max</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Min"><span class="toc-number">1.27.</span> <span class="toc-text">Min</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OfType"><span class="toc-number">1.28.</span> <span class="toc-text">OfType</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OrderBy"><span class="toc-number">1.29.</span> <span class="toc-text">OrderBy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OrderByDescending"><span class="toc-number">1.30.</span> <span class="toc-text">OrderByDescending</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Range"><span class="toc-number">1.31.</span> <span class="toc-text">Range</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Repeat"><span class="toc-number">1.32.</span> <span class="toc-text">Repeat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reverse"><span class="toc-number">1.33.</span> <span class="toc-text">Reverse</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Select"><span class="toc-number">1.34.</span> <span class="toc-text">Select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SelectMany"><span class="toc-number">1.35.</span> <span class="toc-text">SelectMany</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SequenceEqual"><span class="toc-number">1.36.</span> <span class="toc-text">SequenceEqual</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Single"><span class="toc-number">1.37.</span> <span class="toc-text">Single</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SingleOrDefault"><span class="toc-number">1.38.</span> <span class="toc-text">SingleOrDefault</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Skip"><span class="toc-number">1.39.</span> <span class="toc-text">Skip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SkipWhile"><span class="toc-number">1.40.</span> <span class="toc-text">SkipWhile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sum"><span class="toc-number">1.41.</span> <span class="toc-text">Sum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Take"><span class="toc-number">1.42.</span> <span class="toc-text">Take</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TakeWhile"><span class="toc-number">1.43.</span> <span class="toc-text">TakeWhile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ThenBy"><span class="toc-number">1.44.</span> <span class="toc-text">ThenBy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ThenByDescending"><span class="toc-number">1.45.</span> <span class="toc-text">ThenByDescending</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ToArray"><span class="toc-number">1.46.</span> <span class="toc-text">ToArray</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ToDictionary"><span class="toc-number">1.47.</span> <span class="toc-text">ToDictionary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ToList"><span class="toc-number">1.48.</span> <span class="toc-text">ToList</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ToLookup"><span class="toc-number">1.49.</span> <span class="toc-text">ToLookup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Union"><span class="toc-number">1.50.</span> <span class="toc-text">Union</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where"><span class="toc-number">1.51.</span> <span class="toc-text">Where</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/19/RevitApi%E5%90%88%E9%9B%86/Autodesk.Revit.UI.Selection%20Namespace/" title="Autodesk.Revit.UI.Selection">Autodesk.Revit.UI.Selection</a><time datetime="2025-01-13T14:24:17.222Z" title="更新于 2025-01-13 22:24:17">2025-01-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/20/RevitApi%E5%90%88%E9%9B%86/Autodesk.Revit.DB%20Transform/" title="Autodesk.Revit.DB Transform">Autodesk.Revit.DB Transform</a><time datetime="2025-01-13T14:24:10.853Z" title="更新于 2025-01-13 22:24:10">2025-01-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/10/RevitApi%E5%90%88%E9%9B%86/Autodesk.Revit.DB%20ReferenceIntersector/" title="Autodesk.Revit.DB ReferenceIntersector">Autodesk.Revit.DB ReferenceIntersector</a><time datetime="2025-01-13T14:24:05.336Z" title="更新于 2025-01-13 22:24:05">2025-01-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/10/RevitApi%E5%90%88%E9%9B%86/Autodesk.Revit.DB%20Opening/" title="Autodesk.Revit.DB Opening">Autodesk.Revit.DB Opening</a><time datetime="2025-01-13T14:23:59.564Z" title="更新于 2025-01-13 22:23:59">2025-01-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/30/RevitApi%E5%90%88%E9%9B%86/Autodesk.Revit.DB%20Document/" title="Autodesk.Revit.DB Document">Autodesk.Revit.DB Document</a><time datetime="2025-01-13T14:23:53.531Z" title="更新于 2025-01-13 22:23:53">2025-01-13</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/topback.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By funtim41@gmail.com</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">学而不思则罔，思而不学则殆。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (false){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'FunTim41/funtim41.github.io',
      'data-repo-id': 'R_kgDONjG8ww',
      'data-category-id': 'DIC_kwDONjG8w84Cllg2',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>